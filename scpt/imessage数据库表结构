在较新的 macOS（例如 macOS Ventura、Sonoma）里，message 表常见字段如下（不同版本会略有差异）：

字段	类型	说明
ROWID	INTEGER	消息唯一 ID
guid	TEXT	消息的全局唯一标识符
handle_id	INTEGER	联系人 ID，关联 handle 表的 ROWID
text	TEXT	消息正文
service	TEXT	服务类型（iMessage 或 SMS 等）
account	TEXT	发送账号（Apple ID 或手机号）
date	INTEGER	消息发送时间（2001-01-01起纳秒数）
date_read	INTEGER	被读取的时间戳（纳秒）
date_delivered	INTEGER	被送达的时间戳（纳秒）
is_from_me	INTEGER	是否为自己发送（1=是）
is_sent	INTEGER	是否发送（1=是）
is_delivered	INTEGER	是否送达（1=是）
is_read	INTEGER	是否已读（1=是）
associated_message_guid	TEXT	引用的消息 GUID（例如回复消息）
error	INTEGER	错误状态代码
cache_roomnames	TEXT	群聊标识
destination_caller_id	TEXT	接收方 Caller ID
group_title	TEXT	群聊标题（如果有）


测试sql

export LANG=zh_CN.UTF-8
sqlite3 /Users/wx/Library/Messages/chat.db

.headers on
.mode column



select ROWID as "消息唯一ID",account as "发送账号",handle_id as "联系人ID",text as "消息正文 ", service as "服务类型",is_sent as "是否发送" ,is_delivered as "是否送达",is_read as  "是否已读" from message;
