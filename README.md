# macOS è™šæ‹Ÿæœºç®¡ç†ç³»ç»Ÿ

<div align="center">

![macOS VM Manager](https://img.shields.io/badge/macOS-VM%20Manager-blue?style=for-the-badge&logo=apple)
![Python](https://img.shields.io/badge/Python-3.7+-green?style=for-the-badge&logo=python)
![Flask](https://img.shields.io/badge/Flask-Web%20Framework-red?style=for-the-badge&logo=flask)
![PyQt5](https://img.shields.io/badge/PyQt5-Desktop%20App-orange?style=for-the-badge&logo=qt)

**ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„ macOS è™šæ‹Ÿæœºç®¡ç†å’Œè‡ªåŠ¨åŒ–ç³»ç»Ÿ**

æ”¯æŒè™šæ‹Ÿæœºæ‰¹é‡ç®¡ç†ã€iMessage è‡ªåŠ¨åŒ–ã€AppleID ç®¡ç†ç­‰åŠŸèƒ½

</div>

## ğŸ“‹ ç›®å½•

- [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [ç³»ç»Ÿæ¶æ„](#-ç³»ç»Ÿæ¶æ„)
- [ç¯å¢ƒè¦æ±‚](#-ç¯å¢ƒè¦æ±‚)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [éƒ¨ç½²æ–¹å¼](#-éƒ¨ç½²æ–¹å¼)
- [é…ç½®è¯´æ˜](#-é…ç½®è¯´æ˜)
- [ä½¿ç”¨æŒ‡å—](#-ä½¿ç”¨æŒ‡å—)
- [API æ–‡æ¡£](#-api-æ–‡æ¡£)
- [æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)
- [å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)
- [æ›´æ–°æ—¥å¿—](#-æ›´æ–°æ—¥å¿—)
- [è®¸å¯è¯](#-è®¸å¯è¯)

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **ğŸ–¥ï¸ è™šæ‹Ÿæœºç®¡ç†**: æ‰¹é‡åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€å…‹éš† macOS è™šæ‹Ÿæœº
- **ğŸ“± iMessage è‡ªåŠ¨åŒ–**: è‡ªåŠ¨ç™»å½•ã€æ¶ˆæ¯å‘é€ã€è“å·æ£€æµ‹
- **ğŸ†” AppleID ç®¡ç†**: æ‰¹é‡ç®¡ç† AppleID è´¦æˆ·å’ŒéªŒè¯
- **ğŸ“ å·ç ç®¡ç†**: æ‰‹æœºå·ç æ‰¹é‡å¯¼å…¥å’ŒçŠ¶æ€ç®¡ç†
- **ğŸ”„ è‡ªåŠ¨åŒ–è„šæœ¬**: æ”¯æŒ AppleScript å’Œ Shell è„šæœ¬æ‰§è¡Œ
- **ğŸ“Š å®æ—¶ç›‘æ§**: è™šæ‹ŸæœºçŠ¶æ€ç›‘æ§å’Œæ—¥å¿—æŸ¥çœ‹

### ç•Œé¢æ”¯æŒ
- **ğŸŒ Web ç®¡ç†ç•Œé¢**: åŸºäº Flask çš„ç°ä»£åŒ– Web ç•Œé¢
- **ğŸ–¥ï¸ æ¡Œé¢åº”ç”¨**: åŸºäº PyQt5 çš„åŸç”Ÿæ¡Œé¢åº”ç”¨
- **âš™ï¸ Windows æœåŠ¡**: æ”¯æŒåå°æœåŠ¡æ¨¡å¼è¿è¡Œ

### é«˜çº§ç‰¹æ€§
- **ğŸ”§ æ‰¹é‡æ“ä½œ**: æ”¯æŒè™šæ‹Ÿæœºæ‰¹é‡å…‹éš†å’Œé…ç½®
- **ğŸ“ æ—¥å¿—ç³»ç»Ÿ**: å®Œæ•´çš„æ“ä½œæ—¥å¿—å’Œé”™è¯¯è¿½è¸ª
- **ğŸ”’ å®‰å…¨è®¤è¯**: ç”¨æˆ·ç™»å½•å’Œæƒé™ç®¡ç†
- **ğŸ“¦ ä¸€é”®æ‰“åŒ…**: æ”¯æŒæ‰“åŒ…ä¸º Windows å¯æ‰§è¡Œæ–‡ä»¶

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
macOS VM Manager
â”œâ”€â”€ Web å±‚ (Flask)
â”‚   â”œâ”€â”€ ç”¨æˆ·ç•Œé¢ (HTML/CSS/JS)
â”‚   â”œâ”€â”€ API æ¥å£ (RESTful)
â”‚   â””â”€â”€ è®¤è¯ç³»ç»Ÿ
â”œâ”€â”€ åº”ç”¨å±‚ (Python)
â”‚   â”œâ”€â”€ è™šæ‹Ÿæœºæ§åˆ¶å™¨
â”‚   â”œâ”€â”€ iMessage è‡ªåŠ¨åŒ–
â”‚   â”œâ”€â”€ AppleID ç®¡ç†å™¨
â”‚   â””â”€â”€ è„šæœ¬æ‰§è¡Œå¼•æ“
â”œâ”€â”€ æ•°æ®å±‚
â”‚   â”œâ”€â”€ é…ç½®æ–‡ä»¶ (JSON/YAML)
â”‚   â”œâ”€â”€ æ—¥å¿—æ–‡ä»¶
â”‚   â””â”€â”€ ä¸´æ—¶æ•°æ®
â””â”€â”€ ç³»ç»Ÿå±‚
    â”œâ”€â”€ VMware é›†æˆ
    â”œâ”€â”€ SSH è¿æ¥
    â””â”€â”€ æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
```

## ğŸ’» ç¯å¢ƒè¦æ±‚

### åŸºç¡€ç¯å¢ƒ
- **æ“ä½œç³»ç»Ÿ**: Windows 10/11 (æ¨è)
- **Python**: 3.7 æˆ–æ›´é«˜ç‰ˆæœ¬
- **VMware**: VMware Workstation Pro 15+ æˆ– VMware Player
- **å†…å­˜**: 8GB+ (æ¨è 16GB+)
- **å­˜å‚¨**: 100GB+ å¯ç”¨ç©ºé—´

### Python ä¾èµ–
ä¸»è¦ä¾èµ–åŒ…å°†é€šè¿‡ `requirements.txt` è‡ªåŠ¨å®‰è£…ï¼š
- Flask 2.0+ (Web æ¡†æ¶)
- PyQt5 5.15+ (æ¡Œé¢ç•Œé¢)
- paramiko 2.7+ (SSH è¿æ¥)
- psutil 5.8+ (ç³»ç»Ÿç›‘æ§)
- requests 2.25+ (HTTP è¯·æ±‚)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®
```bash
git clone <repository-url>
cd macos_vm
```

### 2. å®‰è£…ä¾èµ–
```bash
# è‡ªåŠ¨å®‰è£… (æ¨è)
python -m pip install -r requirements.txt

# æˆ–æ‰‹åŠ¨å®‰è£…æ ¸å¿ƒä¾èµ–
pip install flask PyQt5 paramiko psutil requests
```

### 3. é…ç½®ç³»ç»Ÿ
```bash
# å¤åˆ¶é…ç½®æ¨¡æ¿
cp config.py.example config.py

# ç¼–è¾‘é…ç½®æ–‡ä»¶
notepad config.py
```

### 4. å¯åŠ¨åº”ç”¨

#### Web ç‰ˆæœ¬ (æ¨è)
```bash
# Windows
start.bat

# æˆ–ç›´æ¥è¿è¡Œ
python app.py
```

#### æ¡Œé¢ç‰ˆæœ¬
```bash
# Windows
start_webview.bat

# æˆ–ç›´æ¥è¿è¡Œ
python webview_app.py
```

## ğŸ“¦ éƒ¨ç½²æ–¹å¼

### æ–¹å¼ä¸€: å¼€å‘æ¨¡å¼
ç›´æ¥è¿è¡Œ Python è„šæœ¬ï¼Œé€‚åˆå¼€å‘å’Œæµ‹è¯•ï¼š
```bash
python app.py          # Web ç‰ˆæœ¬
python webview_app.py  # æ¡Œé¢ç‰ˆæœ¬
```

### æ–¹å¼äºŒ: æ‰“åŒ…éƒ¨ç½²
ä½¿ç”¨å†…ç½®æ‰“åŒ…è„šæœ¬ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ï¼š
```bash
python build_exe.py
```
ç”Ÿæˆçš„æ–‡ä»¶ä½äº `dist/` ç›®å½•ï¼š
- `macos_vm_web/` - Web æµè§ˆå™¨ç‰ˆæœ¬
- `macos_vm_desktop/` - æ¡Œé¢åº”ç”¨ç‰ˆæœ¬
- `macos_vm_service/` - åå°æœåŠ¡ç‰ˆæœ¬

### æ–¹å¼ä¸‰: Windows æœåŠ¡
å®‰è£…ä¸º Windows ç³»ç»ŸæœåŠ¡ï¼š
```bash
# å®‰è£…æœåŠ¡
python service_runner.py install

# å¯åŠ¨æœåŠ¡
python service_runner.py start

# æŸ¥çœ‹çŠ¶æ€
python service_runner.py status
```

## âš™ï¸ é…ç½®è¯´æ˜

### ä¸»é…ç½®æ–‡ä»¶ (config.py)
```python
# åŸºç¡€é…ç½®
DEBUG = False
SECRET_KEY = 'your-secret-key'
HOST = '0.0.0.0'
PORT = 5000

# è™šæ‹Ÿæœºé…ç½®
VM_BASE_PATH = 'D:/VMs/macOS'
VM_TEMPLATE_PATH = 'D:/VMs/Templates'
SSH_USERNAME = 'admin'
SSH_PASSWORD = 'password'

# æ—¥å¿—é…ç½®
LOG_LEVEL = 'INFO'
LOG_FILE = 'logs/app.log'
LOG_MAX_SIZE = 10 * 1024 * 1024  # 10MB
```

### è™šæ‹Ÿæœºæ¨¡æ¿é…ç½®
åœ¨ `vm_util/plist/` ç›®å½•ä¸‹é…ç½®è™šæ‹Ÿæœºæ¨¡æ¿ï¼š
- ç¡¬ä»¶é…ç½® (CPUã€å†…å­˜ã€ç£ç›˜)
- ç½‘ç»œè®¾ç½®
- åºåˆ—å·å’Œç¡¬ä»¶æ ‡è¯†

## ğŸ“– ä½¿ç”¨æŒ‡å—

### Web ç•Œé¢ä½¿ç”¨
1. **ç™»å½•ç³»ç»Ÿ**: é»˜è®¤ç”¨æˆ·å `admin`ï¼Œå¯†ç  `123456`
2. **è™šæ‹Ÿæœºç®¡ç†**: åˆ›å»ºã€å¯åŠ¨ã€åœæ­¢ã€å…‹éš†è™šæ‹Ÿæœº
3. **iMessage è‡ªåŠ¨åŒ–**: é…ç½® AppleIDï¼Œæ‰§è¡Œæ¶ˆæ¯å‘é€ä»»åŠ¡
4. **ç›‘æ§é¢æ¿**: æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€å’Œæ“ä½œæ—¥å¿—

### æ¡Œé¢åº”ç”¨ä½¿ç”¨
- å¯åŠ¨åè‡ªåŠ¨æ‰“å¼€ç®¡ç†ç•Œé¢
- æ”¯æŒç³»ç»Ÿæ‰˜ç›˜æœ€å°åŒ–
- æä¾›å¿«æ·æ“ä½œèœå•

### å‘½ä»¤è¡Œå·¥å…·
```bash
# è™šæ‹Ÿæœºæ“ä½œ
python -m vm_util.py_util.main --action start --vm-name "macOS-01"
python -m vm_util.py_util.main --action clone --template "base" --count 5

# è„šæœ¬æ‰§è¡Œ
python -m macos_script.executor --script "login.scpt" --vm "macOS-01"
```

## ğŸ”§ API æ–‡æ¡£

### è®¤è¯æ¥å£
```http
POST /api/login
Content-Type: application/json

{
  "username": "admin",
  "password": "123456"
}
```

### è™šæ‹Ÿæœºç®¡ç†
```http
# è·å–è™šæ‹Ÿæœºåˆ—è¡¨
GET /api/vms

# å¯åŠ¨è™šæ‹Ÿæœº
POST /api/vms/{vm_id}/start

# åœæ­¢è™šæ‹Ÿæœº
POST /api/vms/{vm_id}/stop

# å…‹éš†è™šæ‹Ÿæœº
POST /api/vms/clone
Content-Type: application/json

{
  "template": "base-template",
  "count": 3,
  "prefix": "macOS"
}
```

### iMessage è‡ªåŠ¨åŒ–
```http
# å‘é€æ¶ˆæ¯
POST /api/imessage/send
Content-Type: application/json

{
  "vm_id": "macOS-01",
  "phone_number": "+1234567890",
  "message": "Hello World"
}
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. Python ç¯å¢ƒé—®é¢˜
```bash
# æ£€æŸ¥ Python ç‰ˆæœ¬
python --version

# å‡çº§ pip
python -m pip install --upgrade pip

# é‡æ–°å®‰è£…ä¾èµ–
pip install -r requirements.txt --force-reinstall
```

#### 2. è™šæ‹Ÿæœºè¿æ¥å¤±è´¥
- æ£€æŸ¥ VMware æ˜¯å¦æ­£å¸¸è¿è¡Œ
- ç¡®è®¤è™šæ‹Ÿæœº SSH æœåŠ¡å·²å¯åŠ¨
- éªŒè¯ç½‘ç»œè¿æ¥å’Œé˜²ç«å¢™è®¾ç½®

#### 3. PyQt5 å®‰è£…å¤±è´¥
```bash
# Windows ç”¨æˆ·
pip install PyQt5 PyQtWebEngine --index-url https://pypi.douban.com/simple/

# æˆ–ä½¿ç”¨ conda
conda install pyqt
```

#### 4. æƒé™é—®é¢˜
- ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œå‘½ä»¤æç¤ºç¬¦
- æ£€æŸ¥æ–‡ä»¶å’Œç›®å½•æƒé™
- ç¡®ä¿ VMware æœ‰è¶³å¤Ÿæƒé™

### æ—¥å¿—æŸ¥çœ‹
```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f logs/app.log

# æŸ¥çœ‹è™šæ‹Ÿæœºæ—¥å¿—
tail -f logs/vm_operations.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f logs/error.log
```

## ğŸ‘¨â€ğŸ’» å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„
```
macos_vm/
â”œâ”€â”€ app.py                 # Flask Web åº”ç”¨å…¥å£
â”œâ”€â”€ webview_app.py         # PyQt5 æ¡Œé¢åº”ç”¨å…¥å£
â”œâ”€â”€ config.py              # é…ç½®æ–‡ä»¶
â”œâ”€â”€ requirements.txt       # Python ä¾èµ–
â”œâ”€â”€ build_exe.py          # æ‰“åŒ…è„šæœ¬
â”œâ”€â”€ service_runner.py     # Windows æœåŠ¡
â”œâ”€â”€ web/                  # Web ç•Œé¢æ–‡ä»¶
â”‚   â””â”€â”€ templates/        # HTML æ¨¡æ¿
â”œâ”€â”€ vm_util/              # è™šæ‹Ÿæœºå·¥å…·
â”‚   â”œâ”€â”€ py_util/         # Python å·¥å…·è„šæœ¬
â”‚   â”œâ”€â”€ bat/             # æ‰¹å¤„ç†è„šæœ¬
â”‚   â””â”€â”€ plist/           # é…ç½®æ–‡ä»¶
â”œâ”€â”€ macos_script/         # macOS è„šæœ¬
â”‚   â”œâ”€â”€ macos_scpt/      # AppleScript è„šæœ¬
â”‚   â””â”€â”€ macos_sh/        # Shell è„šæœ¬
â””â”€â”€ logs/                 # æ—¥å¿—æ–‡ä»¶
```

### å¼€å‘ç¯å¢ƒè®¾ç½®
```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv .venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
.venv\Scripts\activate
# Linux/macOS
source .venv/bin/activate

# å®‰è£…å¼€å‘ä¾èµ–
pip install -r requirements.txt
pip install flake8 pytest  # å¼€å‘å·¥å…·
```

### ä»£ç è§„èŒƒ
- ä½¿ç”¨ PEP 8 ä»£ç é£æ ¼
- å‡½æ•°å’Œç±»æ·»åŠ æ–‡æ¡£å­—ç¬¦ä¸²
- ä½¿ç”¨ç±»å‹æç¤º (Type Hints)
- ç¼–å†™å•å…ƒæµ‹è¯•

### æµ‹è¯•
```bash
# è¿è¡Œæµ‹è¯•
pytest tests/

# ä»£ç æ£€æŸ¥
flake8 .

# ç±»å‹æ£€æŸ¥
mypy .
```

## ğŸ“ æ›´æ–°æ—¥å¿—

### v2.0.0 (2024-01-XX)
- âœ¨ æ–°å¢æ¡Œé¢åº”ç”¨æ”¯æŒ (PyQt5)
- âœ¨ æ–°å¢ Windows æœåŠ¡æ¨¡å¼
- âœ¨ æ–°å¢ä¸€é”®æ‰“åŒ…åŠŸèƒ½
- ğŸ”§ ä¼˜åŒ–å¯åŠ¨è„šæœ¬å’Œé”™è¯¯å¤„ç†
- ğŸ“š å®Œå–„æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—

### v1.5.0 (2023-XX-XX)
- âœ¨ æ–°å¢ iMessage è‡ªåŠ¨åŒ–åŠŸèƒ½
- âœ¨ æ–°å¢æ‰¹é‡è™šæ‹Ÿæœºå…‹éš†
- ğŸ”§ æ”¹è¿›æ—¥å¿—ç³»ç»Ÿ
- ğŸ› ä¿®å¤è‹¥å¹²å·²çŸ¥é—®é¢˜

### v1.0.0 (2023-XX-XX)
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ¨ åŸºç¡€è™šæ‹Ÿæœºç®¡ç†åŠŸèƒ½
- âœ¨ Web ç®¡ç†ç•Œé¢
- âœ¨ AppleID ç®¡ç†åŠŸèƒ½

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ğŸ“ æŠ€æœ¯æ”¯æŒ

- **é—®é¢˜åé¦ˆ**: è¯·åœ¨ GitHub Issues ä¸­æäº¤
- **åŠŸèƒ½å»ºè®®**: æ¬¢è¿åœ¨ Issues ä¸­è®¨è®º
- **æ–‡æ¡£é—®é¢˜**: è¯·æäº¤ PR æˆ– Issue

## âš ï¸ å…è´£å£°æ˜

æœ¬è½¯ä»¶ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œè¯·éµå®ˆç›¸å…³æ³•å¾‹æ³•è§„ã€‚ä½¿ç”¨æœ¬è½¯ä»¶æ‰€äº§ç”Ÿçš„ä»»ä½•åæœç”±ä½¿ç”¨è€…è‡ªè¡Œæ‰¿æ‹…ã€‚

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

---

<div align="center">

**å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ Star æ”¯æŒä¸€ä¸‹ï¼**

 Made with â¤ï¸ by macOS VM Manager Team

</div>