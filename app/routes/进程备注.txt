

配置进程启动功能：
后台按照默认分配执行顺序的脚本，调用scpt通过scptrunner客户端8787调用，分发appleid文本
脚本目录从默认的/Users/wx/Documents/macos_script/macos_scpt/macos11/目录调用执行，顺序为进程详情的脚本添加顺序
appleid文本则读取进程选中的appleid文本信息，使用scp命令传输到macos里面的桌面路径命名为icloud.txt
进程根据传输的appleid文本行数，循环调用appleid_login.scpt，queryiCloudAccount.scpt，logout_icloud.scpt，
当出现json返回值为{"result":""}时候，需要调用login_restart.scpt，重新执行appleid_login.scpt脚本

依次调用三个脚本，并获取脚本返回的json，依次为登录成功，查询成功，注销处理完成，则为一个正常的流程，
出现：icloud登录出错：MOBILEME_CREATE_UNAVAILABLE_MAC 则需要对虚拟机执行更换五码的操作步骤
更换五码步骤参见，虚拟机信息管理页面的批量更改五码 逻辑，选中五码配置文件，执行五码更改，详细逻辑请分析后端api 调用url为：/api/batch_change_wuma

更改五码需要重启虚拟机，重启期间，需要等待虚拟机启动完毕，ip存活，scptRunner 8787端口开放后才可以继续调用脚本执行

进程日志根据在logs目录创建进程id目录，目录下创建进程的日志，写入后台，并异步动态展示到前端

帮我写一个进程，用于无人值守，执行的进程

scpt脚本执行的步骤如下：
如下操作步骤：

1.执行登录appleid：
curl http://192.168.119.218:8787/run?path=/Users/wx/Documents/macos_script/macos_scpt/macos11/appleid_login.scpt

结果一：登录成功
C:\Users\wx>curl http://192.168.119.218:8787/run?path=/Users/wx/Documents/macos_script/macos_scpt/macos11/appleid_login.scpt
{"result":"icloud登录成功sandragonzalez6082@gmail.com"}
结果二：登录出错

C:\Users\wx>curl http://192.168.119.218:8787/run?path=/Users/wx/Documents/macos_script/macos_scpt/macos11/appleid_login.scpt
{"result":"icloud登录出错：MOBILEME_CREATE_UNAVAILABLE_MAC, sandragonzalez6082@gmail.com"}

2，查询icloud激活状态

结果一：查询成功
C:\Users\wx>curl http://192.168.119.218:8787/run?path=/Users/wx/Documents/macos_script/macos_scpt/macos11/queryiCloudAccount.scpt
{"result":"success:true, message:查询成功, data:username:sandragonzalez6082@gmail.com, accountDescription:iCloud, authenticated:1, active:1"}
C:\Users\wx>


结果二：查询失败
C:\Users\wx>curl http://192.168.119.218:8787/run?path=/Users/wx/Documents/macos_script/macos_scpt/macos11/queryiCloudAccount.scpt
{"result":"success:false, message:未找到符合条件的账户, data:missing value"}

3.注销账户后，重新调用第一步登录icloud

结果一注销成功

C:\Users\wx>curl http://192.168.119.218:8787/run?path=/Users/wx/Documents/macos_script/macos_scpt/macos11/logout_icloud.scpt
{"result":"iCloud 注销处理完成"}

结果二：注销失败
C:\Users\wx>curl http://192.168.119.218:8787/run?path=/Users/wx/Documents/macos_script/macos_scpt/macos11/logout_icloud.scpt
{"result":"iCloud 注销失败"}


4.重启脚本

C:\Users\wx>curl http://192.168.119.218:8787/run?path=/Users/wx/Documents/macos_script/macos_scpt/macos11/login_restart.scpt
{"result":"重启成功"}


5.脚本执行有意外错误

C:\Users\wx>curl http://192.168.119.218:8787/run?path=/Users/wx/Documents/macos_script/macos_scpt/macos11/appleid_login.scpt
{"result":""}



